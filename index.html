<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Ecos do Amanhã</title>
  <style>
    body {
      margin: 0;
      background: #000;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    #ui {
      position: fixed;
      top: 10px;
      left: 10px;
      color: white;
      z-index: 10;
    }

    #emotion {
      font-weight: bold;
    }

    canvas {
      display: block;
    }
  </style>
</head>
<body>

<div id="ui">
  Emoção atual: <span id="emotion">EMPATIA</span><br>
  [WASD] mover<br>
  [E] Empatia | [R] Raiva
</div>

<canvas id="game"></canvas>

<script>
/* =======================
   CONFIGURAÇÃO BÁSICA
======================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const emotionText = document.getElementById("emotion");

let emotion = "EMPATIA";

/* =======================
   JOGADOR
======================= */
const player = {
  x: canvas.width / 2,
  y: canvas.height / 2,
  size: 15,
  speed: 4
};

/* =======================
   INPUT
======================= */
const keys = {};

window.addEventListener("keydown", e => {
  keys[e.key.toLowerCase()] = true;

  if (e.key.toLowerCase() === "e") {
    emotion = "EMPATIA";
    emotionText.textContent = emotion;
  }

  if (e.key.toLowerCase() === "r") {
    emotion = "RAIVA";
    emotionText.textContent = emotion;
  }
});

window.addEventListener("keyup", e => {
  keys[e.key.toLowerCase()] = false;
});

/* =======================
   PARTÍCULAS DO MUNDO
======================= */
const particles = [];

function spawnParticle() {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    size: Math.random() * 3 + 1,
    speed: Math.random() * 1 + 0.5
  });
}

for (let i = 0; i < 200; i++) spawnParticle();

/* =======================
   UPDATE
======================= */
function update() {
  if (keys["w"]) player.y -= player.speed;
  if (keys["s"]) player.y += player.speed;
  if (keys["a"]) player.x -= player.speed;
  if (keys["d"]) player.x += player.speed;

  player.x = Math.max(0, Math.min(canvas.width, player.x));
  player.y = Math.max(0, Math.min(canvas.height, player.y));

  particles.forEach(p => {
    p.y += emotion === "RAIVA" ? p.speed * 3 : p.speed;
    if (p.y > canvas.height) p.y = 0;
  });
}

/* =======================
   DRAW
======================= */
function draw() {
  // Fundo emocional
  if (emotion === "EMPATIA") {
    ctx.fillStyle = "rgb(30, 120, 100)";
  } else {
    ctx.fillStyle = "rgb(120, 30, 30)";
  }
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Partículas
  ctx.fillStyle = emotion === "EMPATIA" ? "#8fffd2" : "#ff6b6b";
  particles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fill();
  });

  // Jogador
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.size, 0, Math.PI * 2);
  ctx.fill();
}

/* =======================
   GAME LOOP
======================= */
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
